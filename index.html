<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
  <title>Sistema de Almoxarifado</title>
  <!-- JS de login e inicialização -->
  <script src="script.js" defer></script>
</head>
<body>
  <!-- Barra superior -->
  <div class="top-bar">
    <div class="top-bar-left">
      <span class="account-info">
        <img src="IMG/user-icon.png" alt="Usuário" class="user-icon">
        <span id="logged-user">Usuário Logado</span>
      </span>
    </div>
    <div class="top-bar-right">
      <button class="top-tab active" id="almoxarifado-tab">
        Almoxarifado
        <span class="notification-badge">2</span>
      </button>
      <button class="top-tab" id="frota-tab">Frota</button>
      <button class="top-tab" id="ordens-tab">Ordens de Serviço</button>
    </div>
  </div>

  <!-- Menu lateral -->
  <div class="menu">
    <button class="tab-btn" data-tab="gerenciamento">Gerenciamento</button>
    <button class="tab-btn" data-tab="busca">Busca</button>
    <button class="tab-btn" data-tab="entrada">Entrada</button>
    <button class="tab-btn" data-tab="retiradas">Retiradas</button>
    <button class="tab-btn" data-tab="devolucao">Devolução</button>
    <button class="tab-btn" data-tab="requisitantes">Requisitantes</button>
    <button class="tab-btn" data-tab="fornecedores">Fornecedores</button>
    <button class="tab-btn" data-tab="consultas-produtos">Produtos</button>
    <button class="tab-btn" data-tab="consultas-relatorio">Relatório</button>
    <button class="tab-btn" data-tab="consultas-kits">Kits</button>
    <div class="menu-bottom">
      <button class="menu-icon-btn" id="btn-config">
        <img src="IMG/configurações.png" alt="Configurações">
      </button>
      <button class="menu-icon-btn" id="btn-info">
        <img src="IMG/info.png" alt="Informações">
      </button>
      <button class="menu-icon-btn" id="btn-logout">
        <img src="IMG/sair.png" alt="Sair">
      </button>
    </div>
  </div>

  <!-- Conteúdo principal -->
  <div class="content">
    <!-- Painel principal: Gerenciamento -->
    <div id="gerenciamento" class="tab-content active">
      <h2 class="aba-legenda">Gerenciamento</h2>
      <div style="
        margin-top: 32px; 
        display: flex; 
        flex-wrap: wrap; 
        gap: 24px; 
        justify-content: center;
        align-items: stretch;
      ">
        <!-- Estoque Principal -->

       
        <div style="
          background: #fff;
          border-radius: 12px; 
          padding: 24px; 
          min-width: 220px; 
          max-width: 260px;
          box-shadow: 0 2px 16px #0002;
          flex: 1 1 220px;
          display: flex; 
          flex-direction: column; 
          align-items: center;
          border: 2px solid #ffd5007b;
        ">
          <h3 style="color: #2c5f14; margin-bottom: 12px;">Estoque Principal</h3>
          <div id="estoque-principal-info" style="font-size: 1.1em; color:#222;">
            <p>Quantidade atual: <b>0</b></p>
            <p>Capacidade máxima: <b>0</b></p>
          </div>
        </div>
        <!-- Estoque Secundário -->
        <div style="
          background: #fff;
          border-radius: 12px; 
          padding: 24px; 
          min-width: 220px; 
          max-width: 260px;
          box-shadow: 0 2px 16px #0002;
          flex: 1 1 220px;
          display: flex; 
          flex-direction: column; 
          align-items: center;
          border: 2px solid #ffd5007b;
        ">
          <h3 style="color: #5f2814; margin-bottom: 12px;">Estoque Secundário</h3>
          <div id="estoque-secundario-info" style="font-size: 1.1em; color:#222;">
            <p>Quantidade atual: <b>0</b></p>
            <p>Capacidade máxima: <b>0</b></p>
          </div>
        </div>
        <!-- Pendências -->
        <div style="
          background: #fff;
          border-radius: 12px; 
          padding: 24px; 
          min-width: 220px; 
          max-width: 260px;
          box-shadow: 0 2px 16px #0002;
          flex: 1 1 220px;
          display: flex; 
          flex-direction: column; 
          align-items: center;
          border: 2px solid #ffd5007b;
        ">
          <h3 style="color: #950a0a; margin-bottom: 12px;">Pendências</h3>
          <div id="pendencias-info" style="font-size: 1.1em; color:#222;">
            <ul style="margin:0; padding-left:18px;">
              <li>Nenhuma pendência no momento.</li>
            </ul>
          </div>
        </div>
        <!-- Alertas -->
        <div style="
          background: #fff;
          border-radius: 12px; 
          padding: 24px; 
          min-width: 220px; 
          max-width: 260px;
          box-shadow: 0 2px 16px #0002;
          flex: 1 1 220px;
          display: flex; 
          flex-direction: column; 
          align-items: center;
          border: 2px solid #ffd5007b;
        ">
          <h3 style="color: #a2440e; margin-bottom: 12px;">Alertas</h3>
          <div id="alertas-info" style="font-size: 1.1em; color:#222;">
            <ul style="margin:0; padding-left:18px;">
              <li>Nenhum alerta no momento.</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Agendamento de Entradas no Estoque -->
      <div style="
        background: #fff;
        border-radius: 12px; 
        padding: 32px; 
        min-width: 320px; 
        box-shadow: 0 2px 12px #0001; 
        margin-top: 32px;
        max-width: 1200px;
        margin-left: auto;
        margin-right: auto;
        border: 2px solid #ffd5007b;
      ">
        <h3 style="color: #555;">Agendamento de Entradas</h3>
        <div id="agendamento-entradas-info">
          <table style="width:100%; border-collapse:separate; border-spacing:0; border-radius:12px; overflow:hidden;">
            <thead>
              <tr style="background:#292929; color:#fff;">
                <th style="padding:10px;">Data Agendada</th>
                <th style="padding:10px;">Nº Nota</th>
                <th style="padding:10px;">Código Rastreamento</th>
                <th style="padding:10px;">Data Prevista Entrega</th>
                <th style="padding:10px;">Destinação</th>
              </tr>
            </thead>
            <tbody style="background:#fff; color:#222;">
              <tr>
                <td style="padding:10px;">10/06/2025</td>
                <td style="padding:10px;">123456</td>
                <td style="padding:10px;">BR1234567890</td>
                <td style="padding:10px;">12/06/2025</td>
                <td style="padding:10px;">Almoxarifado Central</td>
              </tr>
              <tr>
                <td style="padding:10px;">15/06/2025</td>
                <td style="padding:10px;">654321</td>
                <td style="padding:10px;">BR0987654321</td>
                <td style="padding:10px;">18/06/2025</td>
                <td style="padding:10px;">Obra Setor B</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Confirmação de Utilização de Itens -->
      <div style="
        background: #fff;
        border-radius: 12px;
        padding: 36px 32px;
        margin-top: 32px;
        max-width: 1200px;
        margin-left: auto;
        margin-right: auto;
        border: 2px solid #ffd5007b;
        box-shadow: 0 2px 12px #0001;
      ">
        <h3 style="color: #2d6a4f; margin-bottom: 18px;">Confirmação de Utilização de Itens</h3>
        <table style="width:100%; border-collapse:separate; border-spacing:0; border-radius:12px; overflow:hidden; font-size: 1.08em;">
          <thead>
            <tr style="background:#292929; color:#fff;">
              <th style="padding:10px;">Nº OS</th>
              <th style="padding:10px;">ID Retirada</th>
              <th style="padding:10px;">Itens Utilizados</th>
              <th style="padding:10px;">Ações</th>
            </tr>
          </thead>
          <tbody style="background:#fff; color:#222;">
            <tr>
              <td style="padding:10px;">OS-2025-0012</td>
              <td style="padding:10px;">145</td>
              <td style="padding:10px;">
                <button type="button" onclick="mostrarDetalhesItens(this)" style="background:#f9a825; color:#222; border:none; border-radius:4px; padding:6px 14px; cursor:pointer; font-size:1.1em;">
                  +
                </button>
                <div class="detalhes-itens" style="display:none; margin-top:10px; background:#f7f7f7; border:1px solid #ccc; border-radius:6px; padding:12px; color:#222;">
                  <b>Itens usados:</b>
                  <ul style="margin:0; padding-left:18px;">
                    <li>Parafuso M10 (ID: 101) - Qtde: 12</li>
                    <li>Fita Isolante (ID: 102) - Qtde: 2</li>
                  </ul>
                </div>
              </td>
              <td style="padding:10px;">
                <button type="button" style="background:#2d6a4f; color:#fff; border:none; border-radius:4px; padding:8px 22px; cursor:pointer; font-size:1.08em;">
                  Confirmar Retirada
                </button>
              </td>
            </tr>
            <!-- Adicione mais linhas conforme necessário -->
          </tbody>
        </table>
      </div>
    </div>

    <!-- Conteúdo entrada -->
    <div id="entrada" class="tab-content" style="width:100%; max-width:100%; box-sizing:border-box;">
  <h2 class="aba-legenda">Entrada</h2>
  <!-- Modal para upload de imagem permanece igual -->

  <form id="form-produtos">
    <div class="form-group linha" style="align-items: flex-start;">
      <!-- Coluna 1: Identificação -->
      <div class="form-coluna">
        <div>
          <label for="id">ID</label>
          <input type="number" id="id" name="id" required />
        </div>
        <div>
          <label for="codigo">CÓDIGO</label>
          <input type="text" id="codigo" name="codigo" required />
        </div>
        <div>
          <label for="numero-serie">NÚMERO DE SÉRIE</label>
          <input type="text" id="numero-serie" name="numero-serie" />
        </div>
        <div>
          <label for="marca">MARCA</label>
          <select id="marca" name="marca" required>
            <option value="">Selecione</option>
            <option value="Marca A">Marca A</option>
            <option value="Marca B">Marca B</option>
            <option value="Marca D">Marca D</option>
          </select>
        </div>
        <div>
          <label for="unid-medida">UNIDADE DE MEDIDA</label>
          <select id="unid-medida" name="unid-medida" required>
            <option value="">Selecione</option>
            <option value="cm">Centímetro</option>
            <option value="m">Metro</option>
            <option value="unidade">Unidade</option>
            <option value="litro">Litro</option>
            <option value="kg">Kg</option>
          </select>
        </div>
        <div>
          <label for="estoque-minimo">ESTOQUE MÍNIMO</label>
          <input type="number" id="estoque-minimo" name="estoque-minimo" />
        </div>
        <div>
          <label for="data-compra">DATA DA COMPRA</label>
          <input type="date" id="data-compra" name="data-compra" />
        </div>
      </div>

      <!-- Coluna 2: Nota, fornecedor, patrimônio, local, categoria, custo -->
      <div class="form-coluna">
        <div>
          <label for="numero-nota">NÚMERO DA NOTA</label>
          <input type="text" id="numero-nota" name="numero-nota" pattern="[\d\-.,/ ]*" title="Apenas números e os caracteres - . , / são permitidos" />
        </div>
        <div>
          <label for="fornecedor">FORNECEDOR</label>
          <select id="fornecedor" name="fornecedor" required>
            <option value="">Selecione</option>
            <option value="Fornecedor X">Fornecedor X</option>
            <option value="Fornecedor Y">Fornecedor Y</option>
          </select>
        </div>
        <div>
          <label for="patrimonio">PATRIMÔNIO</label>
          <select id="patrimonio" name="patrimonio" required>
            <option value="">Selecione</option>
            <option value="Duque de caxias">Contrato 1</option>
            <option value="Volta redonda">Contrato 2</option>
          </select>
        </div>
        <div>
          <label for="local-estoque">LOCAL ESTOQUE</label>
          <select id="local-estoque" name="local-estoque" required>
            <option value="">Selecione</option>
            <option value="Almoxarifado">Almoxarifado</option>
            <option value="Depósito Central">Estoque</option>
          </select>
        </div>
        <div>
          <label for="categoria">CATEGORIA</label>
          <select id="categoria" name="categoria" required>
            <option value="">Selecione</option>
            <option value="Elétrico">Elétrico</option>
            <option value="Mecânico">Mecânico</option>
            <option value="Hidráulico">Hidráulico</option>
          </select>
        </div>
        <div>
          <label for="custo">CUSTO</label>
          <input type="text" id="custo" name="custo" class="custo-input" required />
        </div>
        <div>
          <label for="garantia">TERMINO DA GARANTIA</label>
          <input type="date" id="garantia" name="garantia" />
        </div>
        <div>
          <label for="data-validade">DATA VALIDADE</label>
          <input type="date" id="data-validade" name="data-validade" />
        </div>
      </div>

      <!-- Coluna 3: Imagem, nome do produto e quantidade -->
      <div class="form-coluna" style="align-items:center; justify-content:flex-start; display:flex; flex-direction:column;">
        <div class="image-preview-container">
          <img id="preview" src="IMG/Sem imagem.png" alt="Ícone de imagem" class="image-preview-img" />
        </div>
        <!-- Nome do Produto abaixo da imagem -->
        <div style="width: 100%; margin-top: 16px;">
          <label for="nome-produto">NOME DO PRODUTO</label>
          <input type="text" id="nome-produto" name="nome-produto" required />
        </div>
        <!-- Quantidade abaixo do nome -->
        <div style="width: 100%; margin-top: 8px;">
          <label for="Quantidade">QUANTIDADE</label>
          <input type="number" id="Quantidade" name="Quantidade" required />
        </div>
      </div>
    </div>
    <button type="submit">Salvar Produto</button>
  </form>
</div>

    <!-- Conteúdo retiradas -->

      <div id="retiradas" class="tab-content">
    <h2 class="aba-legenda">Retiradas</h2>
    <form id="form-retiradas">
      <div class="form-group linha" style="align-items: flex-start;">
        <!-- Coluna esquerda: ID, DATA, REQUISITANTE, RESPONSÁVEL -->
        <div style="flex: 1; min-width: 180px;">
          <div>
            <label for="retirada-id">ID DA RETIRADA</label>
            <input type="number" id="retirada-id" name="retirada-id" required readonly />
          </div>

          <div>
            <label for="retirada-data">DATA</label>
            <input type="date" id="retirada-data" name="retirada-data" required />
          </div>

          <div>
            <label for="retirada-requisitante">REQUISITANTE</label>
            <select id="retirada-requisitante" name="retirada-requisitante" required>
              <option value="">Selecione</option>
              <option value="Setor A">Setor A</option>
              <option value="Setor B">Setor B</option>
              <option value="Setor C">Setor C</option>
            </select>
          </div>

           <div>
                <label for="retirada-responsavel">RESPONSÁVEL</label>
                <input type="text" id="retirada-responsavel" name="retirada-responsavel" required style="width: 100%;" />
            </div>


          
        </div>
        <!-- Coluna central: LOCAL, FINALIDADE, OBSERVAÇÕES, QUANTIDADE -->
        <div style="flex: 2; min-width: 260px; display: flex; flex-direction: column; gap: 8px;">
          <div>
            <label for="retirada-local">LOCAL DE DESTINO</label>
            <select id="retirada-local" name="retirada-local" required style="width: 100%;">
              <option value="">Selecione</option>
              <option value="Obra A">Obra A</option>
              <option value="Obra B">Obra B</option>
              <option value="Outro">Outro</option>
            </select>
            <div id="outro-local-container" style="display: none; margin-top: 4px;">
              <label for="retirada-outro-local">INFORME O LOCAL</label>
              <input type="text" id="retirada-outro-local" name="retirada-outro-local" style="width: 100%;" />
            </div>
          </div>
          <div>
            <label for="retirada-finalidade">FINALIDADE</label>
            <select id="retirada-finalidade" name="retirada-finalidade" required style="width: 100%;">
              <option value="">Selecione</option>
              <option value="Manutenção">Manutenção</option>
              <option value="Instalação">Instalação</option>
              <option value="Reposição">Reposição</option>
              <option value="Reposição">Estoque externo</option>
            </select>
          </div>
          <div>
            <label for="retirada-observacoes">OBSERVAÇÕES</label>
            <textarea id="retirada-observacoes" name="retirada-observacoes" style="width: 100%; height: 92px;"></textarea>
            
          </div>
          
        </div>
        <!-- Coluna direita: Imagem e Produto -->
        <div style="flex: 1; min-width: 220px; display: flex; flex-direction: column; align-items: center; justify-content: flex-start;">
          <img id="retirada-produto-img" src="IMG/Sem imagem.png" alt="Imagem do Produto"
            style="width: 100%; max-width: 100%; height: 150px; object-fit: contain; border: 1px solid #ccc; border-radius: 8px; margin-bottom: 12px;">
          <div style="width: 100%;">
            <label for="retirada-produto">PRODUTO</label>
            <input type="text" id="retirada-produto" name="retirada-produto" list="lista-produtos" style="width: 100%;" />
            <datalist id="lista-produtos">
              <option value="Parafuso M10">
              <option value="Fita Isolante">
              <option value="Tinta Branca">
              <option value="Lâmpada LED">
              <option value="Cimento">
            </datalist>
          </div>
          <div style="width: 100%;">
            <label for="retirada-quantidade">QUANTIDADE</label>
            <input type="number" id="retirada-quantidade" name="retirada-quantidade" min="1" style="width: 100%;" />
          </div>

        </div>
      </div>

      
       

      <div class="form-buttons">
        
        <button type="button" id="btn-cancelar" class="btn-secundario" >Cancelar</button>
        <button type="submit" class="btn-primario">Finalizar Retirada</button>
        <button type="button" id="btn-acrescentar-item" class="btn-secundario">Acrescentar Item</button>
      </div>
    </form>

    <!-- Tabela de itens adicionados -->
    <div class="tabela-itens">
      <h3>Itens para Retirada</h3>
      <table>
        <thead>
          <tr>
            <th>Produto</th>
            <th>Quantidade</th>
            <th>Destino</th>
            <th>Finalidade</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody id="itens-retirada">
          <!-- Itens serão adicionados dinamicamente -->
        </tbody>
      </table>
    </div>

    </div>




    <div id="devolucao" class="tab-content">
      
  <h2 class="aba-legenda">Devolução</h2>
    <form id="form-devolucao">
      <div class="form-group linha" style="align-items: flex-start;">
        <div style="flex: 1; min-width: 180px;">
          <div>
            <label for="devolucao-id">ID DA RETIRADA</label>
            <input type="number" id="devolucao-id" name="devolucao-id" list="lista-ids-retirada" required />
            <datalist id="lista-ids-retirada">
              <!-- IDs de retiradas serão inseridos aqui via JS -->
            </datalist>
          </div>
          <div>
            <label for="devolucao-data">DATA</label>
            <input type="date" id="devolucao-data" name="devolucao-data" required />
          </div>
          <div>
            <label for="devolucao-requisitante">REQUISITANTE</label>
            <select id="devolucao-requisitante" name="devolucao-requisitante" required>
              <option value="">Selecione</option>
              <option value="Setor A">Setor A</option>
              <option value="Setor B">Setor B</option>
              <option value="Setor C">Setor C</option>
            </select>
          </div>
          <div>
            <label for="devolucao-responsavel">RESPONSÁVEL</label>
            <input type="text" id="devolucao-responsavel" name="devolucao-responsavel" required />
          </div>
          
        </div>
        <div style="flex: 2; min-width: 260px; display: flex; flex-direction: column; gap: 8px;">
          
          <div style="display: flex; align-items: flex-start; gap: 16px;">
            <div style="flex:1 1 0; min-width:0;">
              <label for="devolucao-observacao">OBSERVAÇÃO DA DEVOLUÇÃO</label>
              <textarea id="devolucao-observacao" name="devolucao-observacao" style="width: 100%; height: 122px; resize: vertical;"></textarea>
            </div>
            <div class="image-preview-container" id="devolucao-image-preview-container"
              style="width: 150px; height: 180px; min-width: 150px; min-height: 180px; display: flex; align-items: center; justify-content: center; background: #fff; border: 1px solid #ccc; border-radius: 8px; margin: 0;">
              <img id="devolucao-produto-img" src="IMG/Sem imagem.png" alt="Imagem do Produto" class="image-preview"
                style="width: 100%; max-width: 100%; height: 150px; object-fit: contain; border: none; border-radius: 8px; background: #fff; display: block; margin: 0 auto;">
            </div>
          </div>
          
          <div>
            <label for="devolucao-produto">PRODUTO</label>
            <input type="text" id="devolucao-produto" name="devolucao-produto" list="lista-produtos" style="width: 100%;" required />
          </div>
          <div>
            <label for="devolucao-quantidade">QUANTIDADE</label>
            <input type="number" id="devolucao-quantidade" name="devolucao-quantidade" min="1" required style="width: 100%;" />
          </div>
          
        </div>
      </div>
      <div class="form-buttons">
        <button type="button" id="btn-cancelar-devolucao" class="btn-secundario">Cancelar</button>
        <button type="submit" class="btn-primario">Registrar Devolução</button>
      </div>
    </form>
    <div class="tabela-itens">
      <h3>Devoluções Registradas</h3>
      <table>
        <thead>
          <tr>
            <th>ID Retirada</th>
            <th>Produto</th>
            <th>Quantidade</th>
            <th>Requisitante</th>
            <th>Responsável</th>
            <th>Observação</th>
            <th>Data</th>
          </tr>
        </thead>
        <tbody id="itens-devolucao">
          <!-- Itens de devolução serão adicionados aqui -->
        </tbody>
      </table>
    </div>
  </div>


    <!-- Tela da aba Busca -->
    <div id="busca" class="tab-content">
    <h2 class="aba-legenda">Busca</h2>
     
      <form id="form-busca" style="margin-bottom: 18px;">
        <div style="display: flex; gap: 12px; align-items: flex-end; flex-wrap: wrap;">
          <div>
            <label for="tipo-busca">Buscar em:</label>
            <select id="tipo-busca" name="tipo-busca" required>
              <option value="retiradas">Retiradas</option>
              <option value="devolucoes">Devoluções</option>
              <option value="fornecedores">Fornecedores</option>
              <option value="produtos">Produtos</option>
              <option value="requisitantes">Requisitantes</option>
              <option value="kits">Kits</option>
            </select>
          </div>
          <div>
            <label for="busca-inicio">Data início:</label>
            <input type="date" id="busca-inicio" name="busca-inicio">
          </div>
          <div>
            <label for="busca-fim">Data fim:</label>
            <input type="date" id="busca-fim" name="busca-fim">
          </div>
          <div id="filtros-dinamicos" style="display: flex; gap: 12px; flex-wrap: wrap;"></div>
          <button type="submit" class="btn-primario">Buscar</button>
        </div>
      </form>
      <div id="resultado-busca"></div>
    </div>

    <!-- Tela Produtos -->
    <div id="consultas-produtos" class="tab-content">
    <h2 class="aba-legenda">Produtos</h2>
      <div style="margin-top: 32px; text-align: center;">

      </div>
      <!-- Tabela de produtos -->
      <div style="overflow-x:auto; margin-top: 24px;">
        <table id="tabela-produtos" style="width:100%; border-collapse:collapse;">
          <thead>
            <tr style="background:#292929; color:#fff;">
              <th>ID</th>
              <th>Código</th>
              <th>Nome</th>
              <th>Marca</th>
              <th>Unidade</th>
              <th>Nº Série</th>
              <th>Garantia</th>
              <th>Validade</th>
              <th>Quantidade</th>
              <th>Estoque Mínimo</th>
              <th>Data Compra</th>
              <th>Custo</th>
              <th>Nº Nota</th>
              <th>Fornecedor</th>
              <th>Patrimônio</th>
              <th>Local Estoque</th>
              <th>Categoria</th>
              <th>Imagem</th>
              <th>Ações</th>
            </tr>
          </thead>
          <tbody>
            <!-- Os produtos cadastrados aparecerão aqui via JS -->
          </tbody>
        </table>
      </div>
    </div>

    <!-- Modal de edição de produto -->
    <div id="modal-editar-produto" class="modal" style="display:none;">
      <div class="modal-content" style="max-width:600px;">
        <span class="close" id="fechar-modal-editar-produto">&times;</span>
        <h3>Editar Produto</h3>
        <form id="form-editar-produto">
          <div class="form-group linha">
            <div class="form-coluna">
              <div>
                <label for="edit-id">ID</label>
                <input type="number" id="edit-id" name="edit-id" required />
              </div>
              <div>
                <label for="edit-codigo">CÓDIGO</label>
                <input type="text" id="edit-codigo" name="edit-codigo" required />
              </div>
              <div>
                <label for="edit-nome-produto">NOME DO PRODUTO</label>
                <input type="text" id="edit-nome-produto" name="edit-nome-produto" required />
              </div>
            </div>
          </div>
          <div class="form-group linha">
            <div>
              <label for="edit-marca">MARCA</label>
              <select id="edit-marca" name="edit-marca" required>
                <option value="">Selecione</option>
                <option value="Marca A">Marca A</option>
                <option value="Marca B">Marca B</option>
                <option value="Marca D">Marca D</option>
              </select>
            </div>
            <div>
              <label for="edit-unid-medida">UNIDADE DE MEDIDA</label>
              <select id="edit-unid-medida" name="edit-unid-medida" required>
                <option value="">Selecione</option>
                <option value="cm">Centímetro</option>
                <option value="m">Metro</option>
                <option value="unidade">Unidade</option>
                <option value="litro">Litro</option>
                <option value="kg">Kg</option>
              </select>
            </div>
          </div>
          <label for="edit-numero-serie">NÚMERO DE SÉRIE</label>
          <input type="text" id="edit-numero-serie" name="edit-numero-serie" />

          <div class="form-group linha">
            <div>
              <label for="edit-garantia">TERMINO DA GARANTIA</label>
              <input type="date" id="edit-garantia" name="edit-garantia" />
            </div>
            <div>
              <label for="edit-data-validade">DATA VALIDADE</label>
              <input type="date" id="edit-data-validade" name="edit-data-validade" />
            </div>
          </div>
          <div class="form-group linha">
            <div>
              <label for="edit-Quantidade">QUANTIDADE</label>
              <input type="number" id="edit-Quantidade" name="edit-Quantidade" required />
            </div>
            <div>
              <label for="edit-estoque-minimo">ESTOQUE MÍNIMO</label>
              <input type="number" id="edit-estoque-minimo" name="edit-estoque-minimo" />
            </div>
          </div>
          <div class="form-group linha">
            <div>
              <label for="edit-data-compra">DATA DA COMPRA</label>
              <input type="date" id="edit-data-compra" name="edit-data-compra" />
            </div>
            <div>
              <label for="edit-custo">CUSTO</label>
              <input type="text" id="edit-custo" name="edit-custo" class="custo-input" required />
            </div>
          </div>
          <div class="form-group linha">
            <div>
              <label for="edit-numero-nota">NÚMERO DA NOTA</label>
              <input type="text" id="edit-numero-nota" name="edit-numero-nota" pattern="[\d\-.,/ ]*" title="Apenas números e os caracteres - . , / são permitidos" />
            </div>
            <div>
              <label for="edit-fornecedor">FORNECEDOR</label>
              <select id="edit-fornecedor" name="edit-fornecedor" required>
                <option value="">Selecione</option>
                <option value="Fornecedor X">Fornecedor X</option>
                <option value="Fornecedor Y">Fornecedor Y</option>
              </select>
            </div>
          </div>
          <div class="form-group linha">
            <div>
              <label for="edit-patrimonio">PATRIMÔNIO</label>
              <select id="edit-patrimonio" name="edit-patrimonio" required>
                <option value="">Selecione</option>
                <option value="Duque de caxias">Contrato 1</option>
                <option value="Volta redonda">Contrato 2</option>
              </select>
            </div>
            <div>
              <label for="edit-local-estoque">LOCAL ESTOQUE</label>
              <select id="edit-local-estoque" name="edit-local-estoque" required>
                <option value="">Selecione</option>
                <option value="Almoxarifado">Almoxarifado</option>
                <option value="Depósito Central">Estoque</option>
              </select>
            </div>
            <div>
              <label for="edit-categoria">CATEGORIA</label>
              <select id="edit-categoria" name="edit-categoria" required>
                <option value="">Selecione</option>
                <option value="Elétrico">Elétrico</option>
                <option value="Mecânico">Mecânico</option>
                <option value="Hidráulico">Hidráulico</option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label for="edit-imagem">Imagem</label>
            <input type="file" id="edit-imagem" name="edit-imagem" accept="image/*" />
          </div>
          <button type="submit" class="btn-primario" style="margin-top: 16px;">Salvar Alterações</button>
        </form>
      </div>
    </div>

    <!-- Tela Requisitantes -->
    <div id="requisitantes" class="tab-content">
    <h2 class="aba-legenda">Requisitantes</h2>
     
      <form id="form-requisitante" style="max-width: 480px; margin: 32px auto 0 auto; text-align: left;">
        <div class="form-group">
          <label for="nome-requisitante">Nome do Requisitante</label>
          <input type="text" id="nome-requisitante" name="nome-requisitante" required style="width: 100%;">
        </div>
        <div class="form-group">
          <label for="setor-requisitante">Setor</label>
          <input type="text" id="setor-requisitante" name="setor-requisitante" required style="width: 100%;">
        </div>
        <div class="form-group">
          <label for="funcao-requisitante">Função</label>
          <input type="text" id="funcao-requisitante" name="funcao-requisitante" required style="width: 100%;">
        </div>
        <div class="form-group">
          <label for="email-requisitante">E-mail</label>
          <input type="email" id="email-requisitante" name="email-requisitante" style="width: 100%;">
        </div>
        <div class="form-group">
          <label for="telefone-requisitante">Telefone</label>
          <input type="tel" id="telefone-requisitante" name="telefone-requisitante" style="width: 100%;">
        </div>
        <button type="submit" class="btn-primario" style="margin-top: 16px;">Salvar Requisitante</button>
      </form>
      <div id="lista-requisitantes" style="max-width: 600px; margin: 32px auto 0 auto;">
        <!-- Lista de requisitantes cadastrados aparecerá aqui futuramente -->
      </div>
    </div>

    <!-- Tela Fornecedores -->
    <div id="fornecedores" class="tab-content">
    <h2 class="aba-legenda">Fornecedores</h2>
      
      <form id="form-fornecedor" style="max-width: 700px; margin: 32px auto 0 auto; text-align: left;">
      <div style="display: flex; gap: 24px; flex-wrap: wrap;">
        <div style="flex: 1 1 300px;">
          <div class="form-group">
            <label for="nome-fornecedor">Nome do Fornecedor</label>
            <input type="text" id="nome-fornecedor" name="nome-fornecedor" required style="width: 100%;">
          </div>
          <div class="form-group">
            <label for="nome-representante">Representante</label>
            <input type="text" id="nome-representante" name="nome-representante" required style="width: 100%;">
          </div>
          <div class="form-group">
            <label for="cnpj-fornecedor">CNPJ</label>
            <input type="text" id="cnpj-fornecedor" name="cnpj-fornecedor" required style="width: 100%;" pattern="\d{2}\.\d{3}\.\d{3}/\d{4}-\d{2}">
          </div>
          <div class="form-group">
            <label for="email-fornecedor">E-mail</label>
            <input type="email" id="email-fornecedor" name="email-fornecedor" style="width: 100%;">
          </div>
          <div class="form-group">
            <label for="telefone-fornecedor">Telefone</label>
            <input type="tel" id="telefone-fornecedor" name="telefone-fornecedor" style="width: 100%;">
          </div>
          <div class="form-group">
            <label for="endereco-fornecedor">Endereço</label>
            <input type="text" id="endereco-fornecedor" name="endereco-fornecedor" style="width: 100%;">
          </div>
        </div>
        <div style="flex: 1 1 300px;">
          <div class="form-group">
            <label for="cep-fornecedor">CEP</label>
            <input type="text" id="cep-fornecedor" name="cep-fornecedor" style="width: 100%;">
          </div>
          <div class="form-group">
            <label for="uf-fornecedor">UF</label>
            <input type="text" id="uf-fornecedor" name="uf-fornecedor" maxlength="2" style="width: 100%;">
          </div>
          <div class="form-group">
            <label for="municipio-fornecedor">Município</label>
            <input type="text" id="municipio-fornecedor" name="municipio-fornecedor" style="width: 100%;">
          </div>
          <div class="form-group">
            <label for="servico-produto-fornecedor">Serviço/Produto</label>
            <input type="text" id="servico-produto-fornecedor" name="servico-produto-fornecedor" style="width: 100%;">
          </div>
          <div class="form-group">
            <label for="obs-fornecedor">Observações</label>
            <textarea id="obs-fornecedor" name="obs-fornecedor" style="width: 100%;" rows="2"></textarea>
          </div>
          <div class="form-group">
            <label for="status-fornecedor">Status</label>
            <select id="status-fornecedor" name="status-fornecedor" style="width: 100%;">
              <option value="ativo">Ativo</option>
              <option value="inativo">Inativo</option>
            </select>
          </div>
        </div>
      </div>
      <button type="submit" class="btn-primario" style="margin-top: 16px;">Salvar Fornecedor</button>
    </form>
      <div id="lista-fornecedores" style="max-width: 600px; margin: 32px auto 0 auto;">
        <!-- Lista de fornecedores cadastrados aparecerá aqui futuramente -->
      </div>
    </div>

    <!-- Tela Relatório -->
    <div id="consultas-relatorio" class="tab-content">
    <h2 class="aba-legenda">Relatório</h2>
      <div style="margin-top: 32px; text-align: center;">

      <div style="margin-top: 32px; max-width: 1100px; margin-left: auto; margin-right: auto;">
        <form id="form-relatorio" style="display: flex; gap: 18px; flex-wrap: wrap; align-items: flex-end; margin-bottom: 24px;">
          <div>
            <label for="tipo-relatorio">Tipo de Relatório</label>
            <select id="tipo-relatorio" name="tipo-relatorio" required style="width: 180px;">
              <option value="">Selecione</option>
              <option value="retiradas">Retiradas</option>
              <option value="devolucoes">Devoluções</option>
              <option value="produtos">Produtos</option>
              <option value="kits">Kits</option>
              <option value="fornecedores">Fornecedores</option>
            </select>
          </div>
          <div>
            <label for="data-inicio-rel">Data início</label>
            <input type="date" id="data-inicio-rel" name="data-inicio-rel">
          </div>
          <div>
            <label for="data-fim-rel">Data fim</label>
            <input type="date" id="data-fim-rel" name="data-fim-rel">
          </div>
          <div>
            <label for="filtro-relatorio">Filtro (opcional)</label>
            <input type="text" id="filtro-relatorio" name="filtro-relatorio" placeholder="Ex: nome, código, etc." style="width: 180px;">
          </div>
          <button type="submit" class="btn-primario" style="height: 38px;">Gerar Relatório</button>
          <button type="button" id="btn-exportar-excel" class="btn-primario" style="height: 38px; background: #388e3c; margin-left: 8px;">
            Exportar Excel
          </button>
        </form>
        <div id="resultado-relatorio">
          <!-- O resultado do relatório será exibido aqui -->
        </div>
      </div>
      </div>
    </div>

    <!-- Tela Kits -->
    <div id="consultas-kits" class="tab-content">
    <h2 class="aba-legenda">Kits</h2>
      <div style="margin-top: 32px; text-align: center;">
      
      </div>
      <form id="form-kit" style="max-width: 600px; margin: 24px auto;">
        <div class="form-group" style="margin-bottom: 16px;">
          <label for="kit-id">ID do Kit</label>
          <input type="number" id="kit-id" name="kit-id" readonly style="width: 100%; background: #f5f5f5; color: #888;" placeholder="Gerado automaticamente">
        </div>
        <div class="form-group" style="margin-bottom: 16px;">
          <label for="kit-nome">Nome do Kit</label>
          <input type="text" id="kit-nome" name="kit-nome" required style="width: 100%;">
        </div>
        <div class="form-group" style="margin-bottom: 16px;">
          <label for="kit-categoria">Categoria</label>
          <input type="text" id="kit-categoria" name="kit-categoria" required style="width: 100%;" placeholder="Ex: Elétrico, Hidráulico, etc.">
        </div>
        <div class="form-group" style="margin-bottom: 24px;">
          <label>Itens Associados ao Kit</label>
          <ul id="kit-itens-lista" style="list-style: none; padding-left: 0; margin-bottom: 12px;">
            <!-- Itens do kit serão listados aqui via JS -->
            <li style="display: flex; align-items: center; justify-content: space-between; border: 1px solid #eee; border-radius: 6px; padding: 6px 10px; margin-bottom: 6px;">
              <span>
                <b>Parafuso M10</b> <span style="color:#888;">(ID: 101)</span>
              </span>
              <span>
                <button type="button" style="background:#e65100; color:#fff; border:none; border-radius:4px; padding:2px 8px; cursor:pointer;">Remover</button>
                <button type="button" style="background:#f9a825; color:#222; border:none; border-radius:4px; padding:2px 8px; cursor:pointer; margin-left:4px;">Editar</button>
              </span>
            </li>
            <!-- Exemplo de item, remova em produção -->
          </ul>
          <div style="display: flex; gap: 8px; align-items: center;">
            <input type="text" id="novo-item-kit" placeholder="Adicionar novo item..." style="flex:1;">
            <button type="button" id="btn-adicionar-item-kit" style="background:#2d6a4f; color:#fff; border:none; border-radius:4px; padding:6px 16px; cursor:pointer;">Adicionar</button>
          </div>
        </div>
        <button type="submit" style="background:#292929; color:#fff; border:none; border-radius:4px; padding:10px 24px; cursor:pointer;">Salvar Kit</button>
      <div style="max-width:1000px; margin:40px auto 0 auto;">
        <h3 style="color:#292929;">Kits Cadastrados</h3>
        <table style="width:100%; border-collapse:separate; border-spacing:0; border-radius:12px; overflow:hidden;">
          <thead>
            <tr style="background:#292929; color:#fff;">
              <th style="padding:10px;">ID</th>
              <th style="padding:10px;">Nome do Kit</th>
              <th style="padding:10px;">Categoria</th>
              <th style="padding:10px;">Itens</th>
              <th style="padding:10px;">Ações</th>
            </tr>
          </thead>
          <tbody style="background:#fff; color:#222;">
            <tr>
              <td style="padding:10px;">1</td>
              <td style="padding:10px;">Kit Elétrico</td>
              <td style="padding:10px;">Elétrico</td>
              <td style="padding:10px;">
                <ul style="margin:0; padding-left:18px;">
                  <li>Parafuso M10</li>
                  <li>Fita Isolante</li>
                </ul>
              </td>
              <td style="padding:10px;">
                <button style="background:#f9a825; color:#222; border:none; border-radius:4px; padding:4px 12px; cursor:pointer;">Editar</button>
                <button style="background:#e65100; color:#fff; border:none; border-radius:4px; padding:4px 12px; cursor:pointer; margin-left:8px;">Excluir</button>
              </td>
            </tr>
            <!-- Adicione mais linhas dinamicamente via JS -->
          </tbody>
        </table>
      </div>
      
      </form>

      <!-- Lista de Kits já cadastrados -->
      
    </div>
    </div> <!-- fechamento da div .content -->

    <!-- Sidebar direito FORA da .content -->
    <div class="sidebar-right" style="padding:0; margin:0;">
  <img src="IMG/Logo.png" alt="Logo" class="logo"
    style="display:block; margin:40px auto 0 auto; width:240px; height:240px; object-fit:contain; border:none; border-radius:0; background:none; box-shadow:none; padding:0;"/>
  <!-- Linha horizontal logo abaixo da logo -->
  <hr style="width:90%; border:0; border-top:2px solid #1d1d1c69; margin:24px auto 0 auto;">
  <div id="sidebar-content">
    <!-- Conteúdo dinâmico será inserido aqui -->
  </div>
  <!-- ...chat e outros elementos... -->
</div>



    <script>
      // Atualiza nome do usuário logado
      const usuarioLogado = JSON.parse(localStorage.getItem("usuario"));
      if (usuarioLogado?.nome) {
        document.getElementById("logged-user").textContent = usuarioLogado.nome;
      }
    </script>

    <script>
  function renderSidebar() {
    const tabRetiradas = document.getElementById('retiradas');
    const sidebar = document.getElementById('sidebar-content');
    const itensRetirada = document.querySelectorAll('#itens-retirada tr');
    const retiradasTabAtiva = tabRetiradas.classList.contains('active');
    const temItens = itensRetirada.length > 0;

    if (retiradasTabAtiva && temItens) {
      // Pegando os valores do formulário de retirada
      const id = document.getElementById('retirada-id')?.value || '-';
      const data = document.getElementById('retirada-data')?.value || '-';
      const requisitante = document.getElementById('retirada-requisitante')?.value || '-';
      const responsavel = document.getElementById('retirada-responsavel')?.value || '-';
      const local = document.getElementById('retirada-local')?.value === 'Outro'
        ? (document.getElementById('retirada-outro-local')?.value || '-')
        : (document.getElementById('retirada-local')?.value || '-');
      const finalidade = document.getElementById('retirada-finalidade')?.value || '-';
      const obs = document.getElementById('retirada-observacoes')?.value || '-';

      sidebar.innerHTML = `
        <h4>Nota de Retirada (Preview)</h4>
        <div id="nota-preview" style="
          background: #fff;
          border: 1px dashed #888;
          border-radius: 8px;
          padding: 18px 12px 18px 12px;
          margin: 16px 0 12px 0;
          font-family: 'Courier New', Courier, monospace;
          font-size: 13px;
          color: #222;
          box-shadow: 0 2px 8px #0001;
          max-width: 260px;
          min-width: 180px;
          text-align: left;
          letter-spacing: 0.5px;
        ">
          <div style="text-align:center; font-weight:bold; margin-bottom:8px; font-size:15px;">
            *** SINAL VIDA PLUS ***
          </div>
          <div style="font-size:12px; margin-bottom:8px; line-height:1.4;">
            <b>ID:</b> ${id}<br>
            <b>Data:</b> ${data}<br>
            <b>Requisitante:</b> ${requisitante}<br>
            <b>Responsável:</b> ${responsavel}<br>
            <b>Local de Destino:</b> ${local}<br>
            <b>Finalidade:</b> ${finalidade}<br>
            <b>Observações:</b> ${obs}
          </div>
          <div style="border-bottom:1px dashed #bbb; margin-bottom:8px;"></div>
          <div id="nota-preview-content">
            ${Array.from(itensRetirada).map(tr => `<div>${tr.children[0].textContent} - Qtde: ${tr.children[1].textContent}</div>`).join('')}
          </div>
          <div style="border-top:1px dashed #bbb; margin-top:8px; font-size:11px; text-align:center;">
            <
          <b>Data:</b> ${data}<br>
          <b>Requisitante:</b> ${requisitante}<br>
          <b>Responsável:</b> ${responsavel}<br>
          <b>Local de Destino:</b> ${local}<br>
          <b>Finalidade:</b> ${finalidade}<br>
          <b>Observações:</b> ${obs}
        </div>
        <div style="border-bottom:1px dashed #bbb; margin-bottom:8px;"></div>
        <div id="nota-preview-content">
          ${Array.from(itensRetirada).map(tr => `<div>${tr.children[0].textContent} - Qtde: ${tr.children[1].textContent}</div>`).join('')}
        </div>
        <div style="border-top:1px dashed #bbb; margin-top:8px; font-size:11px; text-align:center;">
          <br>Retirada registrada
        </div>
      </div>
    `;
  } else {
    sidebar.innerHTML = `
      <div style="padding: 18px 12px 18px 12px;">
        <h4 style="color:#292929; margin-bottom:10px;">Status do Sistema</h4>
        <div style="margin-bottom: 14px;">
          <b>Notificações</b>
          <ul style="list-style: disc; padding-left: 18px; color: #2d6a4f; margin: 6px 0 0 0;">
            <li>Novo produto salvo com sucesso!</li>
            <li>Produto "Sensor" salvo com sucesso</li>
          </ul>
        </div>
        <div style="margin-bottom: 14px;">
          <b style="color:#950a0a;">Estoque Crítico</b>
          <ul style="list-style: disc; padding-left: 18px; color: #950a0a; margin: 6px 0 0 0;">
            <li>Parafuso M10 - Qtde: 2</li>
          </ul>
        </div>
        <div style="margin-bottom: 14px;">
          <b>Atividades Recentes</b>
          <ul style="list-style: disc; padding-left: 18px; color: #555; margin: 6px 0 0 0;">
            <li>Entrada: Fita Isolante - Hoje, 14:20</li>
          </ul>
        </div>
        <div style="margin-bottom: 14px;">
          <b>Processos</b>
          <ul style="list-style: disc; padding-left: 18px; color: #f9a825; margin: 6px 0 0 0;">
            <li>Enviando imagem de produto...</li>
          </ul>
        </div>
        <div>
          <b>Resumo</b>
          <ul style="list-style: disc; padding-left: 18px; color: #292929; margin: 6px 0 0 0;">
            <li>Total Produtos: 245</li>
            <li>Vencendo em 30 dias: 12</li>
            <li>Média Estoque: 38 unid</li>
          </ul>
        </div>
      </div>
    `;
  }
}

// Chame ao carregar e sempre que mudar de aba ou itens
document.addEventListener('DOMContentLoaded', renderSidebar);

// Exemplo: sempre que mudar de aba ou itens, chame renderSidebar()
document.querySelectorAll('.tab-btn').forEach(btn => {
  btn.addEventListener('click', function() {
    // Remove 'active' de todos os botões
    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
    // Adiciona 'active' apenas no botão clicado
    this.classList.add('active');
    // (Opcional) Troca o conteúdo das abas, se não estiver fazendo isso em outro lugar
    document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
    const tabId = this.getAttribute('data-tab');
    const tabContent = document.getElementById(tabId);
    if (tabContent) tabContent.classList.add('active');
  });
});
document.getElementById('itens-retirada').addEventListener('DOMSubtreeModified', renderSidebar);
</script>

<!-- Adicione este script ao final do <body> da sua index.html, logo antes do </body> -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Recupera o usuário logado do localStorage
  const usuario = JSON.parse(localStorage.getItem('usuario') || '{}');
  const ordensBtn = document.getElementById('ordens-tab');

  // Se não for admin, esconde o botão "Ordens de Serviço"
  if (ordensBtn && (!usuario || !usuario.tipo || usuario.tipo.toLowerCase() !== 'admin')) {
    ordensBtn.style.display = 'none';
  } else if (ordensBtn) {
    ordensBtn.style.display = '';
  }
});
</script>

<script>
function mostrarDetalhesItens(btn) {
  const detalhes = btn.parentElement.querySelector('.detalhes-itens');
  if (detalhes) {
    detalhes.style.display = detalhes.style.display === 'none' ? 'block' : 'none';
  }
}
</script>
<nav id="menu-abas-superior"></nav>
</body>
</html>

